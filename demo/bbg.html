<html>

<head>
    <script src="../dist/nbnatlas-sdk.js"></script>
    <script>

        function getSeekAdviceData() {
            _start(1);
            NBNAtlas.bbg.getSeekAdviceData(_getPlaceName(1))
            .then((data) => {
                _handleSuccess(1, data)
            })
            .catch(e =>{
                _handleError(1,e)
            })
        }

        function getDigestTableData() {
            _start(2);
            NBNAtlas.bbg.getDigestTableData(_getPlaceName(2))
            .then((data) => {
                _handleSuccess(2, data)
            })
            .catch(e =>{
                _handleError(2,e)
            })
        }


        function getPlace() {
            _start(3);
            NBNAtlas.bbg.getPlace(_getPlaceName(3))
            .then((data) => {
                _handleSuccess(3, data)
            })
            .catch(e =>{
                _handleError(3,e)
            })
        }

        function _getPlaceName(testNo){
            return document.getElementById('place'+testNo).value;
        }

        function _start(testNo){
            document.getElementById('result'+testNo).innerHTML='Loading (may be slow) .....';
        }

        function _handleSuccess(testNo, data){
           document.getElementById('result'+testNo).innerHTML=JSON.stringify(data);
        }

        function _handleError(testNo, e){
            let msg = e.message.indexOf('aborted a request.')>-1 ? 'Web service is not responding. Try again.' : e.message;
            console.error(e);
            document.getElementById('result'+testNo).innerHTML='ERROR '+msg;
        }
    </script>

    <style>
        .row {
  display: flex;
  margin-bottom:1rem;
}

.col {
  flex: 50%;
  overflow-y: auto;
}


pre{margin-bottom: 5px; overflow:auto}

.warn {color:#c00; font-weight: bold;}

input[type=text]{
    width:350px
}
    </style>
</head>

<body>
    <div class="row">
        <div class="col">
        <h3>NBNAtlas.bbg.getSeekAdviceData( ${placeName})</h3>

        <h3>Test:</h3>
        Place Name <input type="text" id="place1" value="Croydon Cemetery" /> <input type = "button" onclick = "getSeekAdviceData()" value = "Go" />

    <h3>Example Code:</h3>

    <pre><code>
    &lt;script src="https://cdn.nbnatlas.org/dist/nbnatlas-sdk.js"&gt;&lt;/script&gt;
    NBNAtlas.bbg.getSeekAdviceData("Croydon Cemetery");
    </code></pre>


    <a href="https://cdn.nbnatlas.org/docs/NBNAtlas.BBG.html" target="_blank">SDK Documentation</a>

 </div>
<div class="col" id="result1">

</div>
    </div>

    <div class="row" style="background-color: floralwhite; border-top:1px solid black;">
        <div class="col">
        <h3>NBNAtlas.bbg.getDigestTableData( ${placeName} )</h3>

        <h3>Test:</h3>
        Place Name <input type="text" id="place2" value="Abbots Leigh: Holy Trinity" /> <input type = "button" onclick = "getDigestTableData()" value = "Go" />

        <h3>Example Code: </h3>
        <pre><code>
        &lt;script src="https://cdn.nbnatlas.org/dist/nbnatlas-sdk.js"&gt;&lt;/script&gt;
        NBNAtlas.bbg.getDigestTableData("Abbots Leigh: Holy Trinity");
        </code></pre>

        <a href="https://cdn.nbnatlas.org/docs/NBNAtlas.BBG.html" target="_blank">SDK Documentation</a>


</div>
    <div class="col" id="result2">

    </div>
        </div>


        <div class="row">
            <div class="col">
            <h3>NBNAtlas.bbg.getPlace( ${placeName})</h3>

            <h3>Test:</h3>
            Place Name <input type="text" id="place3" value="Baildon: St James" /> <input type = "button" onclick = "getPlace()" value = "Go" />

        <h3>Example Code:</h3>

        <pre><code>
        &lt;script src="https://cdn.nbnatlas.org/dist/nbnatlas-sdk.js"&gt;&lt;/script&gt;
        NBNAtlas.bbg.getPlace("Baildon: St James");
        </code></pre>


        <a href="https://cdn.nbnatlas.org/docs/NBNAtlas.BBG.html" target="_blank">SDK Documentation</a>

     </div>
    <div class="col" id="result3">

    </div>
        </div>

</body>

</html>